@{             
    DBO.User user = ViewBag.user;
    ViewBag.Title = "Page Personnelle - " + user.Name;

    List<DBO.Recette> recettes = BM.Recette.GetRecetteByUser(user);
    List<DBO.Note> notes = BM.Note.GetNoteByUser(user);
    List<DBO.Commentaire> commentaires = BM.Commentaire.GetCommentaireByUser(user);
    List<DBO.Conseil> conseils = BM.Conseil.GetConseilByUser(user);
}

<div id="content">
    <h1>@ViewBag.Title</h1>
    <div class="add_link multiple">
        @Html.ActionLink("Créer une recette", "Creation", "Recette")
        @Html.ActionLink("Créer un conseil", "Creation", "Conseil")
        @Html.ActionLink("Changer de mot de passe", "ChangePassword", "Account")    
    </div>

    <h3>Mes recettes</h3>
    @if (recettes.Count == 0)
    {
        <p>Pas de recettes</p>
    }
    else
    {
        foreach (DBO.Recette recette in recettes)
        {
            <div class="liste_recette page_perso">
                <h2>@Html.ActionLink(recette.Nom, "Fiche", "Recette", new { id = recette.Id }, null)</h2>
            </div>
        }
    }

    <h3>Mes notes</h3>
    @if (notes.Count == 0)
    {
        <p>Pas de notes</p>
    }
    else
    {
        <ul>
        @foreach (DBO.Note note in notes)
        {
            <li>
                <ul id="stars">@Html.Raw(HttpUtility.HtmlDecode(BM.Note.GetNoteHtml(note.NoteRecette)))</ul>
                @Html.ActionLink(BM.Recette.GetRecetteById(note.idRecette).Nom, "Fiche", "Recette", new { id = note.idRecette }, null)
            </li>
        }
        </ul>
    }

    <div class="comments">
        <h3>Mes commentaires</h3>
            @if (commentaires.Count == 0)
            {
                <p>Pas de commentaires</p>                
            }
            else
            {
                <ul class="comment">
                    @foreach (DBO.Commentaire commentaire in commentaires)
                    {
                        <li><span class="user_link">
                                @Html.ActionLink(BM.Recette.GetRecetteById(commentaire.idRecette).Nom, "Fiche", "Recette",
                                                 new { id = commentaire.idRecette }, null)
                            </span>
                            <span class="date">@commentaire.DateCreation</span>
                            <p>@commentaire.Text</p>
                        </li>
                    }
                </ul>
            }

    <h3>Mes conseils</h3>
    @if (conseils.Count == 0)
    {
        <p>Pas de conseils</p>
    }
    else
    {
        <ul>
        @foreach (DBO.Conseil conseil in conseils)
        {
            <li>@Html.ActionLink(conseil.Nom, "Fiche", "Conseil", new { id = conseil.Id }, null)</li>
        }
        </ul>
    }
</div>